(function(){function o(o,u){o=o||"";u=u||{};for(var a in e){if(e.hasOwnProperty(a)){if(u.autoFix){u["fix_"+a]=true}u.fix=u.fix||u["fix_"+a]}}var f=[];var l=function(e){return typeof e=="string"?e.replace(/(&#\d{1,4};)/gm,function(e){var t=e.substring(2,e.length-1);return String.fromCharCode(t)}):e};var c=function(e){o+=e};var h=function(e){o=e+o};var p={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s>]/i,startTag:/^</,chars:/^[^<]/};var d={comment:function(){var e=o.indexOf("-->");if(e>=0){return{content:o.substr(4,e),length:e+3}}},endTag:function(){var e=o.match(n);if(e){return{tagName:e[1],length:e[0].length}}},atomicTag:function(){var e=d.startTag();if(e){var t=o.slice(e.length);if(t.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var n=t.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(n){return{tagName:e.tagName,attrs:e.attrs,content:n[1],length:n[0].length+e.length}}}}},startTag:function(){var e=o.match(t);if(e){var n={};e[2].replace(r,function(e,t){var r=arguments[2]||arguments[3]||arguments[4]||i.test(t)&&t||null;n[t]=l(r)});return{tagName:e[1],attrs:n,unary:!!e[3],length:e[0].length}}},chars:function(){var e=o.indexOf("<");return{length:e>=0?e:o.length}}};var v=function(){for(var e in p){if(p[e].test(o)){if(s){console.log("suspected "+e)}var t=d[e]();if(t){if(s){console.log("parsed "+e,t)}t.type=t.type||e;t.text=o.substr(0,t.length);o=o.slice(t.length);return t}return null}}};var m=function(e){var t;while(t=v()){if(e[t.type]&&e[t.type](t)===false){return}}};var g=function(){var e=o;o="";return e};var y=function(){return o};if(u.fix){(function(){var e=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i;var t=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i;var n=[];n.last=function(){return this[this.length-1]};n.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()};n.containsTagName=function(e){for(var t=0,n;n=this[t];t++){if(n.tagName===e){return true}}return false};var r=function(t){if(t&&t.type==="startTag"){t.unary=e.test(t.tagName)||t.unary}return t};var i=v;var s=function(){var e=o;var t=r(i());o=e;return t};var a=function(){var e=n.pop();h("</"+e.tagName+">")};var f={startTag:function(e){var r=e.tagName;if(r.toUpperCase()==="TR"&&n.lastTagNameEq("TABLE")){h("<TBODY>");c()}else if(u.fix_selfClose&&t.test(r)&&n.containsTagName(r)){if(n.lastTagNameEq(r)){a()}else{h("</"+e.tagName+">");c()}}else if(!e.unary){n.push(e)}},endTag:function(e){var t=n.last();if(t){if(u.fix_tagSoup&&!n.lastTagNameEq(e.tagName)){a()}else{n.pop()}}else if(u.fix_tagSoup){l()}}};var l=function(){i();c()};var c=function(){var e=s();if(e&&f[e.type]){f[e.type](e)}};v=function(){c();return r(i())}})()}return{append:c,readToken:v,readTokens:m,clear:g,rest:y,stack:f}}var e=function(){var e={};var t;var n=this.document.createElement("div");t="<P><I></P></I>";n.innerHTML=t;e.tagSoup=n.innerHTML!==t;n.innerHTML="<P><i><P></P></i></P>";e.selfClose=n.childNodes.length===2;return e}();var t=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/;var n=/^<\/([\-A-Za-z0-9_]+)[^>]*>/;var r=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;var i=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;var s=false;o.supports=e;o.tokenToString=function(e){var t={comment:function(e){return"<--"+e.content+"-->"},endTag:function(e){return"</"+e.tagName+">"},atomicTag:function(e){console.log(e);return t.startTag(e)+e.content+t.endTag(e)},startTag:function(e){var t="<"+e.tagName;for(var n in e.attrs){var r=e.attrs[n];t+=" "+n+'="'+(r?r.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return t+(e.unary?"/>":">")},chars:function(e){return e.text}};return t[e.type](e)};o.escapeAttributes=function(e){var t={};for(var n in e){var r=e[n];t[n]=r&&r.replace(/(^|[^\\])"/g,'$1\\"')}return t};for(var u in e){o.browserHasFlaw=o.browserHasFlaw||!e[u]&&u}this.htmlParser=o})();(function(){function r(){}function i(e){return"function"===typeof e}function s(e,t,n){var r,i=e&&e.length||0;for(r=0;r<i;r++){t.call(n,e[r],r)}}function o(e,t,n){var r;for(r in e){if(e.hasOwnProperty(r)){t.call(n,r,e[r])}}}function u(e,t){o(t,function(t,n){e[t]=n});return e}function a(e,t){e=e||{};o(t,function(t,n){if(e[t]==null){e[t]=n}});return e}function f(e){try{return n.call(e)}catch(t){var r=[];s(e,function(e){r.push(e)});return r}}function l(e){return!e||!("tagName"in e)?!1:!!~e.tagName.toLowerCase().indexOf("script")}function c(e){return!e||!("tagName"in e)?!1:!!~e.tagName.toLowerCase().indexOf("style")}var e=this;if(e.postscribe){return}var t=false;var n=Array.prototype.slice;var h=function(){function r(e,t,r){var i=n+t;if(arguments.length===2){var s=e.getAttribute(i);return s==null?s:String(s)}else if(r!=null&&r!==""){e.setAttribute(i,r)}else{e.removeAttribute(i)}}function a(t,n){var i=t.ownerDocument;u(this,{root:t,options:n,win:i.defaultView||i.parentWindow,doc:i,parser:e.htmlParser("",{autoFix:true}),actuals:[t],proxyHistory:"",proxyRoot:i.createElement(t.nodeName),scriptStack:[],writeQueue:[]});r(this.proxyRoot,"proxyof",0)}var n="data-ps-";a.prototype.write=function(){[].push.apply(this.writeQueue,arguments);var e;while(!this.deferredRemote&&this.writeQueue.length){e=this.writeQueue.shift();if(i(e)){this.callFunction(e)}else{this.writeImpl(e)}}};a.prototype.callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this.onScriptStart(t);e.call(this.win,this.doc);this.onScriptDone(t)};a.prototype.writeImpl=function(e){this.parser.append(e);var t,n=[],r,i;while((t=this.parser.readToken())&&!(r=l(t))&&!(i=c(t))){n.push(t)}this.writeStaticTokens(n);if(r){this.handleScriptToken(t)}if(i){this.handleStyleToken(t)}};a.prototype.writeStaticTokens=function(e){var n=this.buildChunk(e);if(!n.actual){return}n.html=this.proxyHistory+n.actual;this.proxyHistory+=n.proxy;this.proxyRoot.innerHTML=n.html;if(t){n.proxyInnerHTML=this.proxyRoot.innerHTML}this.walkChunk();if(t){n.actualInnerHTML=this.root.innerHTML}return n};a.prototype.buildChunk=function(e){var t=this.actuals.length,r=[],i=[],o=[];s(e,function(e){r.push(e.text);if(e.attrs){if(!/^noscript$/i.test(e.tagName)){var s=t++;i.push(e.text.replace(/(\/?>)/," "+n+"id="+s+" $1"));if(e.attrs.id!=="ps-script"&&e.attrs.id!=="ps-style"){o.push(e.type==="atomicTag"?"":"<"+e.tagName+" "+n+"proxyof="+s+(e.unary?" />":">"))}}}else{i.push(e.text);o.push(e.type==="endTag"?e.text:"")}});return{tokens:e,raw:r.join(""),actual:i.join(""),proxy:o.join("")}};a.prototype.walkChunk=function(){var e,t=[this.proxyRoot];while((e=t.shift())!=null){var n=e.nodeType===1;var i=n&&r(e,"proxyof");if(!i){if(n){this.actuals[r(e,"id")]=e;r(e,"id",null)}var s=e.parentNode&&r(e.parentNode,"proxyof");if(s){this.actuals[s].appendChild(e)}}t.unshift.apply(t,f(e.childNodes))}};a.prototype.handleScriptToken=function(e){var t=this.parser.clear();if(t){this.writeQueue.unshift(t)}e.src=e.attrs.src||e.attrs.SRC;if(e.src&&this.scriptStack.length){this.deferredRemote=e}else{this.onScriptStart(e)}var n=this;this.writeScriptToken(e,function(){n.onScriptDone(e)})};a.prototype.handleStyleToken=function(e){var t=this.parser.clear();if(t){this.writeQueue.unshift(t)}e.type=e.attrs.type||e.attrs.TYPE||"text/css";this.writeStyleToken(e);if(t){this.write()}};a.prototype.writeStyleToken=function(e){var t=this.buildStyle(e);this.insertStyle(t);if(e.content){if(t.styleSheet&&!t.sheet){t.styleSheet.cssText=e.content}else{t.appendChild(this.doc.createTextNode(e.content))}}};a.prototype.buildStyle=function(e){var t=this.doc.createElement(e.tagName);t.setAttribute("type",e.type);o(e.attrs,function(e,n){t.setAttribute(e,n)});return t};a.prototype.insertStyle=function(e){this.writeImpl('<span id="ps-style"/>');var t=this.doc.getElementById("ps-style");t.parentNode.replaceChild(e,t)};a.prototype.onScriptStart=function(e){e.outerWrites=this.writeQueue;this.writeQueue=[];this.scriptStack.unshift(e)};a.prototype.onScriptDone=function(e){if(e!==this.scriptStack[0]){this.options.error({message:"Bad script nesting or script finished twice"});return}this.scriptStack.shift();this.write.apply(this,e.outerWrites);if(!this.scriptStack.length&&this.deferredRemote){this.onScriptStart(this.deferredRemote);this.deferredRemote=null}};a.prototype.writeScriptToken=function(e,t){var n=this.buildScript(e);var r=this.shouldRelease(n);var i=this.options.afterAsync;if(e.src){n.src=e.src;this.scriptLoadHandler(n,!r?function(){t();i()}:i)}try{this.insertScript(n);if(!e.src||r){t()}}catch(s){this.options.error(s);t()}};a.prototype.buildScript=function(e){var t=this.doc.createElement(e.tagName);o(e.attrs,function(e,n){t.setAttribute(e,n)});if(e.content){t.text=e.content}return t};a.prototype.insertScript=function(e){this.writeImpl('<span id="ps-script"/>');var t=this.doc.getElementById("ps-script");t.parentNode.replaceChild(e,t)};a.prototype.scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null;t()}var r=this.options.error;u(e,{onload:function(){n()},onreadystatechange:function(){if(/^(loaded|complete)$/.test(e.readyState)){n()}},onerror:function(){r({message:"remote script failed "+e.src});n()}})};a.prototype.shouldRelease=function(e){var t=/^script$/i.test(e.nodeName);return!t||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))};return a}();var p=function(){function o(){var e=n.shift();if(e){e.stream=l.apply(null,e)}}function l(e,n,i){function p(e){e=i.beforeWrite(e);s.write(e);i.afterWrite(e)}s=new h(e,i);s.id=t++;s.name=i.name||s.id;c.streams[s.name]=s;var a=e.ownerDocument;var l={close:a.close,open:a.open,write:a.write,writeln:a.writeln};u(a,{close:r,open:r,write:function(){return p(f(arguments).join(""))},writeln:function(){return p(f(arguments).join("")+"\n")}});var d=s.win.onerror||r;s.win.onerror=function(e,t,n){i.error({msg:e+" - "+t+":"+n});d.apply(s.win,arguments)};s.write(n,function(){u(a,l);s.win.onerror=d;i.done();s=null;o()});return s}function c(t,u,f){if(i(f)){f={done:f}}f=a(f,{releaseAsync:false,afterAsync:r,done:r,error:function(e){throw e},beforeWrite:function(e){return e},afterWrite:r});t=/^#/.test(t)?e.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var l=[t,u,f];t.postscribe={cancel:function(){if(l.stream){l.stream.abort()}else{l[1]=r}}};n.push(l);if(!s){o()}return t.postscribe}var t=0;var n=[];var s=null;return u(c,{streams:{},queue:n,WriteStream:h})}();e.postscribe=p})();var EpomCunami=function(e,t,n,r,i){this.start=function(){var e=this;e.loadAd(0);setInterval(function(){e.loadAd(0)},r)};this.loadAd=function(e){var r=this;if(e==i){return}$.ajax({dataType:"jsonp",url:"http://www.adshost1.com/ads-api",data:"key="+t+"&format=jsonp",success:function(t){if(t.success){$("#"+n).html("");postscribe("#"+n,t.code)}else{if(t.beacon){(new Image).src=t.beacon}if(t.code){$("#"+n).html(t.code)}r.loadAd(++e)}}})}}